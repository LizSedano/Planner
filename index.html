<!DOCTYPE html>
<html lang="es" class="h-full bg-slate-50">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Planner Colaborativo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .scrollbar-thin::-webkit-scrollbar { height: 8px; width: 8px; }
    .scrollbar-thin::-webkit-scrollbar-thumb { background: rgba(148,163,184,.6); border-radius: 9999px; }
    .line-clamp-3 {
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    @keyframes slideIn { from { transform: translateY(-10px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
  </style>
</head>
<body class="h-full">
  <div id="loadingOverlay" class="fixed inset-0 bg-black/20 z-50 hidden items-center justify-center">
    <div class="bg-white px-6 py-4 rounded-xl shadow-xl text-slate-700 flex items-center gap-3">
      <svg class="animate-spin h-5 w-5" viewBox="0 0 24 24" fill="none">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4A4 4 0 004 12z"></path>
      </svg>
      <span id="loadingText">Cargando…</span>
    </div>
  </div>

  <div id="toastStack" class="fixed top-4 right-4 z-50 space-y-2"></div>

  <header class="border-b bg-white/70 backdrop-blur-md sticky top-0 z-40">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center gap-3 flex-wrap">
      <h1 class="text-xl font-semibold text-slate-800">Planner Colaborativo</h1>
      <div class="flex items-center gap-2 ml-auto w-full sm:w-auto">
        <label class="sr-only" for="boardInput">Tablero</label>
        <input id="boardInput" class="border rounded-lg px-3 py-2 text-sm w-full sm:w-56" placeholder="Nombre del tablero" value="default">
        <button id="applyBoardBtn" class="px-3 py-2 text-sm rounded-lg bg-slate-800 text-white hover:bg-slate-700">Abrir tablero</button>
      </div>
      <div class="flex items-center gap-2 w-full sm:w-auto">
        <label class="sr-only" for="searchInput">Buscar</label>
        <input id="searchInput" class="border rounded-lg px-3 py-2 text-sm w-full sm:w-64" placeholder="Buscar por título o asignado…">
        <button id="newTaskBtn" class="px-3 py-2 text-sm rounded-lg bg-indigo-600 text-white hover:bg-indigo-500">➕ Nueva tarea</button>
      </div>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 py-6">
    <div id="columns" class="grid grid-cols-1 md:grid-cols-3 gap-4"></div>
  </main>

  <!-- Modal omitido por brevedad (igual que versión colapsable previa) -->

  <script type="module">
    let USE_SUPABASE = true;
    const SUPABASE_URL = "https://vdzslwuljwifougvwrxm.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZkenNsd3VsandpZm91Z3Z3cnhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU4MjM0MTIsImV4cCI6MjA3MTM5OTQxMn0._695RjBlFLllI--P5DdSxSEGrJ4odmWblkWn5AAlGP4";
    const COLLAPSE_LIMIT = 4;

    const STATUSES = [
      { id: 'backlog', label: 'Backlog' },
      { id: 'in_progress', label: 'En progreso' },
      { id: 'done', label: 'Hecho' }
    ];

    // Resto del código: igual que planner_colapsable.html con applyCollapse y renderCards al final
  </script>
</body>
</html>
